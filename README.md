При запуске бота будет задан вопрос 
#### "Сделать отправку постов вне расписания при мониторинге?"
* При ответе `y` при последующем запуске режима мониторинга посты будут отосланы независимо от сопоставления текущего времени (по Киеву) с расписанием.
* При ответе `n` при последующем запуске режима мониторинга посты будут отосланыв ближайщее по расписанию время по Киеву


-----


#### Далее будет предложен набор возможных  команд:
* `/fill_channels` : начать заполнение каждого каналов 1000 лучших постов из сущетвующих в его категории
* `/clear_channels` : очистить все имеющиеся каналы от всех сообщений
* `/autopost`: начать режим постоянного мониторинга новых постов и отправка их по заданному расписанию 
* `/exit` : прекратить выполнение скрипта

Необходимо последовательно вводить нужние команды учитывая префикс в виде `/`



-----

### Заполнение каналов:

#### Отбор необходимых постов
1. Через запрос к API получаю ответ о содержимом старницы канала в формате json, превращаю этот ответ в словарь.
2. Получаю необходимые данные о постах и о существовании следующей страницы с постами
3. Пройдясь по всем страницам канала собираю все посты ( в виде экземпляров класса Post с необходимыми полями ) в единый список.
4. Сортирую его элементы по полю `smiles` и делаю срез от первого до тысячного элемента.
5. Оставшуюся тысячу сортирую по дате публикации от старых к новым.
6. Записываю последний список в словарь под ключем в виде имени канала.
7. Проделываю данный алгоритм для всех канало которые есть в API и для которых есть Telegram ID.

#### Отправка постов в каналы:
1. Из словаря отфильтрованных постов берем список для текущего канала
2. Для каждого элемента списка являющегося изображением:
       * Выполняю проверку на наличие вотермарки сайта с помощью `cv2.matchtemlate()`.
       * Обрезка изображения перед отправкой если вотермарка присутствует.
3. Для каждого элемента списка проверяем тип файла который он содержит и применяем соответвующий метод отправки Telegram Bot Api, делаем паузы в 2 секунды между отправками для избежания Flood Control
4. Добавление отправленного поста в таблицу этого канала в Базе Данных
5. Повторение алгоритма для всех каналов

### Очистка каналов:
1. Подключение к Telegram API
2. Получение списка всех каналов
3. Выбор тех каналов которые соотвествуют каналам из API
4. Отправка в них сообщения для получения последнего Message ID
5. Очистка всех сообщений из всех отобранных каналов



### Мониторинг постов
1. Проверка на свопадение времены вызова метода с пунктами расписания
 * Если разница более трёх минут то вызвать метод через три минуты для повторной проверки
 * Если разница менее трёх минут то начать поиск свежих постов для всех каналов
2. В API запрашиваются посты чьё время публикации позже чем время публикации последнего отправленного в канал поста
3. Для каждого поста вычиляется параметр "Лайков в минуту" (Количество Смайлов разделить на Время жизни поста)
4. Список подходящих по дате постов сортируется по парамету "Лайки в минуту".
5. Каждый элемент списка проверяется на наличие дубликата в базе данных, первый пост не имеющий дуюликата будет возврещен как пост к отправке.
#### В случае не нахождения подходящих постов в указанном периоде времени 
1. Период времени расширяется до времени предпоследнего отправленного.
2. Если это не помогло прозводим 10 попыток расширить диапазон поиска на 5 часов.
3. Если пост все еще не найден 10 раз расширяем диапазон на 1 сутки.
4. Если в результате всех проверок пост не был найден переход к следующему каналу.


